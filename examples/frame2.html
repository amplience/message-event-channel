<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="">
  <title>Frame 2</title>
  <script src="../dist/message-io.umd.js"></script>
  <script src="bling.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.3.0/milligram.css">
</head>
<body>
  <h1>Frame 2</h1>
  <textarea id="contents"></textarea>
  <button id="close" type="button">Close</button>
  <script>
    const connection = mio.connect();
    connection.on('mio-connected', ()=>{
      console.log('connected-child2');
    })
    connection.on('field', field =>{
      document.querySelector('#contents').value = field;
    })
    connection.on('height', (fld, resolve, reject) =>{
      reject('nah sorry bro');
    })

    $('#close').on('click',()=>{
      connection.close();
    })

    const outerHeight = el => {
      var height = el.offsetHeight;
      var style = getComputedStyle(el);
      height += parseInt(style.marginTop) + parseInt(style.marginBottom);
      return height;
    }
  </script>
</body>
</html>
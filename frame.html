<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="" />
    <title>Frame One</title>
    <script src="dist/message-io.umd.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.3.0/milligram.css"
    />
  </head>
  <body>
    <h1>Hello World</h1>
    <textarea id="contents"></textarea>
    <script>
      const connection = mio.connect()
      connection.on('height', (payload, callback) => {
        callback(outerHeight(window.document.body));
      })
      connection.on('field', field =>{
        document.querySelector('#contents').value = field;
      })
      function outerHeight(el) {
        var height = el.offsetHeight;
        var style = getComputedStyle(el);
        height += parseInt(style.marginTop) + parseInt(style.marginBottom);
        return height;
      }
    </script>
  </body>
</html>
